<!DOCTYPE html>
<html>
  



  <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41117431-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-41117431-1');
  </script>
  <script src="../../js/gtag.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ruby ビギナーのための CGI 入門 【第 1 回】 3 ページ</title>
  <meta name="description" content="">

  <script src="../../js/jquery.min.js"></script>
  <script src="../../js/bootstrap.min.js"></script>
  <link href="../../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../../css/theme.css" rel="stylesheet" type="text/css">
  <link href="../../css/syntax.css" rel="stylesheet" type="text/css">
  <link href="../../css/sharebutton.css" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="https://magazine.rubyist.net/articles/0011/0011-CGIProgrammingForRubyBeginners-3.html">
  <link rel="alternate" type="application/rss+xml" title="Rubyist Magazine" href="https://magazine.rubyist.net/feed.xml">
  <link rel="shortcut icon" href="../../images/favicon.ico">
</head>

  <body>
    <div class="container-fluid">
        <div class="row full">
            <div class="col-md-2 hidden-xs sidebar">
                <h4>

</h4>

<h4>バックナンバー</h4>
<ul>
    
        <li><a href="../../articles/prerubykaigi2019/preRubyKaigi2019-index.html">RubyKaigi 2019 直前特集号</a></li>
    
        <li><a href="../../articles/0059/0059-index.html">0059号(2019-01)</a></li>
    
        <li><a href="../../articles/0058/0058-index.html">0058号(2018-08)</a></li>
    
        <li><a href="../../articles/prerubykaigi2018/preRubyKaigi2018-index.html">RubyKaigi 2018 直前特集号</a></li>
    
        <li><a href="../../articles/0057/0057-index.html">0057号(2018-02)</a></li>
    
        <li><a href="../../articles/prerubykaigi2017/preRubyKaigi2017-index.html">RubyKaigi 2017 直前特集号</a></li>
    
        <li><a href="../../articles/0056/0056-index.html">0056号(2017-08)</a></li>
    
        <li><a href="../../articles/0055/0055-index.html">0055号(2017-03)</a></li>
    
        <li><a href="../../articles/0054/0054-index.html">0054号(2016-08)</a></li>
    
        <li><a href="../../articles/pretokyorubykaigi11/preTokyoRubyKaigi11-index.html">東京 Ruby 会議 11 直前特集号</a></li>
    
        <li><a href="../../articles/0053/0053-index.html">0053号(2016-04)</a></li>
    
        <li><a href="../../articles/0052/0052-index.html">0052号(2015-12)</a></li>
    
        <li><a href="../../articles/0051/0051-index.html">0051号(2015-09)</a></li>
    
        <li><a href="../../articles/0050/0050-index.html">0050号(2015-05)</a></li>
    
        <li><a href="../../articles/0049/0049-index.html">0049号(2014-12)</a></li>
    
        <li><a href="../../articles/0048/0048-index.html">0048号(2014-09)</a></li>
    
        <li><a href="../../articles/0047/0047-index.html">0047号(2014-06)</a></li>
    
        <li><a href="../../articles/0046/0046-index.html">0046号(2014-04)</a></li>
    
        <li><a href="../../articles/0045/0045-index.html">0045号(2013-12)</a></li>
    
        <li><a href="../../articles/0044/0044-index.html">0044号(2013-09)</a></li>
    
        <li><a href="../../articles/0043/0043-index.html">0043号(2013-07)</a></li>
    
        <li><a href="../../articles/0042/0042-index.html">0042号(2013-05)</a></li>
    
        <li><a href="../../articles/ruby200specialen/Ruby200SpecialEn-index.html">2.0.0 Special (EN)</a></li>
    
        <li><a href="../../articles/0041/0041-index.html">0041号(2013-02)</a></li>
    
        <li><a href="../../articles/0040/0040-index.html">0040号(2012-11)</a></li>
    
        <li><a href="../../articles/0039/0039-index.html">0039号(2012-09)</a></li>
    
        <li><a href="../../articles/rubykaja/kaja.html">RubyKaja のご紹介</a></li>
    
        <li><a href="../../articles/0038/0038-index.html">0038号(2012-05)</a></li>
    
        <li><a href="../../articles/0037/0037-index.html">0037号(2012-02)</a></li>
    
        <li><a href="../../articles/0036/0036-index.html">0036号(2011-11)</a></li>
    
        <li><a href="../../articles/0035/0035-index.html">0035号(2011-09)</a></li>
    
        <li><a href="../../articles/prerubykaigi2011/preRubyKaigi2011-index.html">RubyKaigi2011直前特集号</a></li>
    
        <li><a href="../../articles/0034/0034-index.html">0034号(2011-06)</a></li>
    
        <li><a href="../../articles/0033/0033-index.html">0033号(2011-04)</a></li>
    
        <li><a href="../../articles/0032/0032-index.html">0032号(2011-01)</a></li>
    
        <li><a href="../../articles/0031/0031-index.html">0031号(2010-10)</a></li>
    
        <li><a href="../../articles/prerubykaigi2010/preRubyKaigi2010-index.html">RubyKaigi2010直前特集号</a></li>
    
        <li><a href="../../articles/0030/0030-index.html">0030号(2010-06)</a></li>
    
        <li><a href="../../articles/0029/0029-index.html">0029号(2010-03)</a></li>
    
        <li><a href="../../articles/0028/0028-index.html">0028号(2009-12)</a></li>
    
        <li><a href="../../articles/0027/0027-index.html">0027号(2009-09)</a></li>
    
        <li><a href="../../articles/0026/0026-index.html">0026号(2009-06)</a></li>
    
        <li><a href="../../articles/0025/0025-index.html">0025号(2009-02)</a></li>
    
        <li><a href="../../articles/0024/0024-index.html">0024号(2008-10)</a></li>
    
        <li><a href="../../articles/0023/0023-index.html">0023号(2008-03)</a></li>
    
        <li><a href="../../articles/0022/0022-index.html">0022号(2007-12)</a></li>
    
        <li><a href="../../articles/0021/0021-index.html">0021号(2007-09)</a></li>
    
        <li><a href="../../articles/0020/0020-index.html">0020号(2007-08)</a></li>
    
        <li><a href="../../articles/0019/0019-index.html">0019号(2007-05)</a></li>
    
        <li><a href="../../articles/0018/0018-index.html">0018号(2007-02)</a></li>
    
        <li><a href="../../articles/0017/0017-index.html">0017号(2006-11)</a></li>
    
        <li><a href="../../articles/0016/0016-index.html">0016号(2006-09)</a></li>
    
        <li><a href="../../articles/0015/0015-index.html">0015号(2006-07)</a></li>
    
        <li><a href="../../articles/rubykaigi2006/RubyKaigi2006-index.html">日本 Ruby カンファレンス 2006 特別号</a></li>
    
        <li><a href="../../articles/0014/0014-index.html">0014号(2006-05)</a></li>
    
        <li><a href="../../articles/0013/0013-index.html">0013号(2006-02)</a></li>
    
        <li><a href="../../articles/0012/0012-index.html">0012号(2005-12)</a></li>
    
        <li><a href="../../articles/0011/0011-index.html">0011号(2005-11)</a></li>
    
        <li><a href="../../articles/0010/0010-index.html">0010号(2005-10)</a></li>
    
        <li><a href="../../articles/0009/0009-index.html">0009号(2005-09)</a></li>
    
        <li><a href="../../articles/0008/0008-index.html">0008号(2005-07)</a></li>
    
        <li><a href="../../articles/0007/0007-index.html">0007号(2005-06)</a></li>
    
        <li><a href="../../articles/0006/0006-index.html">0006号(2005-05)</a></li>
    
        <li><a href="../../articles/0005/0005-index.html">0005号(2005-02)</a></li>
    
        <li><a href="../../articles/0004/0004-index.html">0004号(2004-12)</a></li>
    
        <li><a href="../../articles/0003/0003-index.html">0003号(2004-11)</a></li>
    
        <li><a href="../../articles/0002/0002-index.html">0002号(2004-10)</a></li>
    
        <li><a href="../../articles/0001/0001-index.html">0001号(2004-09)</a></li>
    
</ul>
<p class="rss-subscribe"><a href="/feed.xml">RSS</a></p>

            </div>
            <div class="col-md-10 main">
                <div class="row">
                    <div class="col-md-12">
                        <img src="../../images/rubima_logo_l.png">
                        <h1>Ruby ビギナーのための CGI 入門 【第 1 回】 3 ページ</h1>
                        <div class="social-buttons">
                            <div class='sns'>            
    <ul class="clearfix">
       <li class="twitter"><a href="https://twitter.com/share?text=Ruby ビギナーのための CGI 入門 【第 1 回】 3 ページ&amp;url=https://magazine.rubyist.net/articles/0011/0011-CGIProgrammingForRubyBeginners-3.html" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa fa-twitter"></i></a></li>
       <li class="facebook"><a href="https://www.facebook.com/sharer.php?u=https://magazine.rubyist.net/articles/0011/0011-CGIProgrammingForRubyBeginners-3.html&amp;t=Ruby ビギナーのための CGI 入門 【第 1 回】 3 ページ" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa fa-facebook"></i></a></li>
       <li class="hatebu"><a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=https://magazine.rubyist.net/articles/0011/0011-CGIProgrammingForRubyBeginners-3.html&amp;Ruby ビギナーのための CGI 入門 【第 1 回】 3 ページ" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa">B!</i></a></li>
    </ul>
</div>
                        </div>
                        <div class="post_info">
                            



                        </div>
                        
<p><a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners.html">目次ページへ</a>
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-2.html">前ページへ</a>
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-4.html">次ページへ</a></p>

<ul id="markdown-toc">
  <li><a href="#ruby-のプログラムに馴れよう" id="markdown-toc-ruby-のプログラムに馴れよう">Ruby のプログラムに馴れよう</a>    <ul>
      <li><a href="#ruby-のプログラムを実行しよう" id="markdown-toc-ruby-のプログラムを実行しよう">Ruby のプログラムを実行しよう</a></li>
      <li><a href="#ruby-のプログラムでデータを表示しよう" id="markdown-toc-ruby-のプログラムでデータを表示しよう">Ruby のプログラムでデータを表示しよう</a></li>
      <li><a href="#文字-文字列-で遊んでみよう" id="markdown-toc-文字-文字列-で遊んでみよう">文字 (文字列) で遊んでみよう</a></li>
      <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
    </ul>
  </li>
</ul>

<h2 id="ruby-のプログラムに馴れよう">Ruby のプログラムに馴れよう</h2>

<p>準備も済んだし早速 CGI プログラムを作る……というのも良いのですが、
Ruby に馴れていない状態で
Ruby で書かれた CGI プログラムを読んだり書いたりしても
なかなか理解出来ないでしょう。
CGI プログラム作りの前に
先に Ruby でプログラムを作るために
最低限必要な Ruby の基本を学びます。</p>

<p>私たちが話す言葉と同じで
Ruby にも文法や規則のようなものがあります。
こういった文法や規則は馴れることが重要です。
これから Ruby のプログラムを幾つか紹介するので、
出来るだけ皆さん自身でそのプログラムを
RDE に打ち込んで実行し結果を確かめて 
Ruby に馴れて下さい。</p>

<h3 id="ruby-のプログラムを実行しよう">Ruby のプログラムを実行しよう</h3>

<p>初めに Ruby のプログラムを実行する方法を紹介します。
Ruby のプログラムを実行する方法は幾つかありますが、
ここでは RDE から Ruby のプログラムを実行する方法を紹介します。
その手順は下のようになります。</p>

<ol>
  <li>Ruby のプログラムを RDE で開く</li>
  <li>メニューの 実行 → 実行 を選択する</li>
</ol>

<p>試しにやってみましょう。
C:\rubima011-cgi\ というフォルダーに 
print.rb という Ruby プログラムがあります。
これを使います。</p>

<p>まずは print.rb を RDE で開きます。
メニューの ファイル → 開く から print.rb を選びます。
これで下と同じ内容が RDE に表示されます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print 123</code></pre></figure>

<p>この print.rb というプログラムは 123 を表示します。
実行して確認してみましょう。
メニューの 実行 → 実行 を選択します。</p>

<p>プログラムが実行されると、
RDE の下の方にあるコンソールウィンドウの色が変わり、
その後に 123 と表示されます。
「Completed」も表示されていますが、これは RDE が print.rb の
実行が終了したよということを表示しています。
<img src="../../images/0011-CGIProgrammingForRubyBeginners-3/rde_execute.jpg" alt="rde_execute.jpg" /></p>

<p>RDE に Ruby プログラムを入力して
それを保存してから、実行する方法もあります。
具体的には下のような手順になります。
この方法は次の節で紹介します。</p>

<ol>
  <li>Ruby のプログラムを RDE に打ち込む</li>
  <li>ファイルに保存する</li>
  <li>メニューの 実行 → 実行 を選択する</li>
</ol>

<p>Ruby プログラムの実行方法を覚えないと、
プログラムを書くことも試すことも出来ません。
自分で何度か試して実行方法を身につけましょう。</p>

<h3 id="ruby-のプログラムでデータを表示しよう">Ruby のプログラムでデータを表示しよう</h3>

<p>Ruby プログラムの実行方法が分かったところで
Ruby プログラムでデータを表示する方法を覚えましょう。
CGI プログラムでは数値や文字などのデータ (主に HTML) を表示することが多く、
データを表示出来なければ CGI プログラムを作ることが出来ません。</p>

<p>先ほど print.rb で 123 という数値を表示させましたね。
そこで使われた print というのがデータを表示する方法の一つです。
試しに print.rb を自分で作って print を使ってみましょう。</p>

<p>RDE でメニューの ファイル → 新規作成 を選ぶと、
新しいファイルを編集することが出来るようになります。
そこに「 print 123 」と打ち込んで 
メニューの ファイル → 保存 を選んで
print1.rb として保存します。
保存したらメニューの 実行 → 実行を選んで下さい。
print.rb と同じように 123 と表示されます。</p>

<p>print の使い方をもう少し詳しくみてみましょう。
print は下のように使います。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print (データ)</code></pre></figure>

<p>print は (データ) で指定されたデータを表示する Ruby の命令です。
「print 123」の例では 123 が (データ) に相当します。 
(データ) の部分には色々な種類のデータを指定することが可能です。
文字や数値などはその一例です。</p>

<p>違い例でも試してみましょう。
下の内容を print.rb と同じように実行してみて下さい。
この Ruby プログラムは整数・小数・文字を表示させます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print 123
print 12.4
print "s"</code></pre></figure>

<p>”s” というのはアルファベットの小文字の s を表します。
文字についてはこのすぐ後で説明するので、
今はこういうものだと思って下さい。
上のプログラムを実行すると下のように表示されます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">12312.4s</code></pre></figure>

<p>何故このように表示されるのでしょうか？
Ruby のプログラムを実行すると、
その内容が上から順番に実行されます。
上の場合なら</p>

<ol>
  <li>print 123</li>
  <li>print 12.4</li>
  <li>print “s”</li>
</ol>

<p>という順番ですね。これを頭の中で順に実行してみましょう。
1 行目が実行された段階では</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">123</code></pre></figure>

<p>と表示されます。
次に 2 行目が実行されると、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">12312.4</code></pre></figure>

<p>と表示されます。
print は前に表示されたデータのすぐ後ろに
データを表示するので、
上のように 123 と 12.4 がつながってしまいます。
最後の 3 行目が実行されると、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">12312.4s</code></pre></figure>

<p>となります。皆さんの中には
下のように複数行に表示されると思った人もいるでしょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">123
12.4
s</code></pre></figure>

<p>このように表示することも可能ですが、
それには Ruby における文字について学ばなければなりません。</p>

<h3 id="文字-文字列-で遊んでみよう">文字 (文字列) で遊んでみよう</h3>

<p>CGI では頻繁に HTML を表示します。
その HTML というのは文字の集まり(文字列)です。</p>

<p>例えば、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;Ruby&lt;/body&gt;
&lt;/html&gt;</code></pre></figure>

<p>という HTML 
(HTML の文法からみると良い HTML ではありませんが、
説明を簡単にするためにこの HTML を使います) 
はアルファベットや「&lt;」「&gt;」「/」などの文字の集まりです。</p>

<p>皆さんが作る CGI プログラムでは多くの場合、HTML を扱います。
HTML を扱うということは文字処理を行うということになり、
CGI プログラムでは文字処理は避けて通れません。
そこで、ここでは Ruby で文字列を作る方法やその表示方法を学んでおきましょう。</p>

<p>ところで、先ほど文字列という言葉が出てきましたね。
文字列というのは簡単に言えば文字の集まりのことです。
プログラムの解説では文字列という言葉を使うので、
この連載でも今後は文字列という表現を使います。
覚えておいて下さい。</p>

<p>では、最初は文字列を作ってみましょう。
Ruby で文字列を作るのはとても簡単です。
文字列にしたい部分を「’」や「”」で囲います。
今回は、「”」で囲んだ文字列について説明します。</p>

<p>まず、RDEに下の内容を打ち込んで、実行してみて下さい。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print "&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Ruby&lt;/body&gt;&lt;/html&gt;"</code></pre></figure>

<p>どうでしょうか？期待したように表示されましたか？
おそらく上に書いた HTML と違って、
一行にまとめて出力されてしまったことと思います。
では、複数行に表示させるにはどうすれば良いでしょうか？
いくつか方法がありますが、ここでは
print で改行を表示させる方法をとることにします。</p>

<p>メモ帳や Microsoft Word で行を変える時に「Enter」キーを
押して行をかえますよね。
あれは「Enter」キーを押すことで
メモ帳や Word に改行を入力しているから行がかわるのです。
同様に print で改行を表示させると、
その後に表示されるデータは次の行から表示されます。
これを使って HTML を複数行に表示しましょう。</p>

<p>Ruby では文字列を「”」で囲んだ場合、
改行を「\n」と書く決まりになっています。
このことを使って例で示した HTML を表示させてみます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print "&lt;html&gt;\n"
print "&lt;head&gt;&lt;/head&gt;\n"
print "&lt;body&gt;Ruby&lt;/body&gt;\n"
print "&lt;/html&gt;\n"</code></pre></figure>

<p>今度はちゃんと複数行に表示されたと思います。</p>

<p>次に下の内容を RDE で実行してみて下さい。
「12312.4s」を複数行に表示させるという先ほど質問の答えがこれです。
「\n」は単独で使うことも出来ます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print 123
print "\n"
print 12.4
print "\n"
print "s"
print "\n"</code></pre></figure>

<p>Ruby には puts という命令があり、
これを使うと最後に改行が無い場合に改行を追加してくれます。
先ほどの HTML を puts で表示させてみましょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">puts "&lt;html&gt;"
puts "&lt;head&gt;&lt;/head&gt;"
puts "&lt;body&gt;Ruby&lt;/body&gt;"
puts "&lt;/html&gt;"</code></pre></figure>

<p>ところで、「”」で文字列を作ると言いましたが、
「”」そのものを表示させたい場合はどうしたら良いのでしょうか？
答えは「\“」です。下の内容を RDE 打ち込んで実行してみて下さい。
3 つ目の「”」が文字列の区切りになっていて、
2 つ目の「\“」は「”」と表示されていますね。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">print "文字列にしたい部分を\"で囲むと、Ruby はそれを命令や変数ではなく文字列として扱います。\n"</code></pre></figure>

<p>「”」で囲われた文字列では「\“」「\n」以外にも
「\」とそれに続く一文字に特別な意味を持つ場合があります。
それに関しては別の機会に紹介することにします。</p>

<p>最後に下のようなプログラムを考えてみましょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">puts "abc" + "123"</code></pre></figure>

<p>「abc123」と表示されますね。
このプログラムでは最初に “abc” + “123” が実行され、
その後にその結果が puts で表示されます。</p>

<p>文字列同士の足し算というのは Ruby では文字列の結合を意味するので、
下の二つは計算の結果同じデータになります。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"abc" + "123"</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"abc123"</code></pre></figure>

<p>文字列同士の足し算を先に行うということを考えると、
上のプログラムの流れは下のようになります。</p>

<ol>
  <li>“abc” + “123” を計算する</li>
  <li>“abc123” という結果になる</li>
  <li>“abc123” が puts で表示される</li>
</ol>

<p>プログラムは上から順番に 1 行づつ実行されますが、
同じ行の中でも実行される順番があります。
詳しい事はまた説明しますが、
「+」は print や puts よりも先に実行されるということを
覚えておいて下さい。</p>

<h3 id="まとめ">まとめ</h3>

<p>ここでは Ruby のプログラムの作り方やその実行方法、
文字列、 print, puts という Ruby の命令を紹介しました。</p>

<p>Ruby には print や puts 以外にも沢山の命令があります。
Ruby のプログラムを作る時は print, puts のような Ruby の命令を
いくつか組み合わせて自分の望む動作を行わせます。
CGI プログラムを作る時も全く同じです。
大きく違うのは CGI というルールに従わなければならない点です。</p>

<p><a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners.html">目次ページへ</a>
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-2.html">前ページへ</a>
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-4.html">次ページへ</a></p>


                    </div>
                </div>
            </div>
        </div>
    </div>
  </body>
</html>
