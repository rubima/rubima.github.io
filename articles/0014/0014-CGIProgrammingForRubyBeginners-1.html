<!DOCTYPE html>
<html>
  



  <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41117431-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-41117431-1');
  </script>
  <script src="../../js/gtag.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ruby ビギナーのための CGI 入門 【第 3 回】 ページ 1</title>
  <meta name="description" content="">

  <script src="../../js/jquery.min.js"></script>
  <script src="../../js/bootstrap.min.js"></script>
  <link href="../../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../../css/theme.css" rel="stylesheet" type="text/css">
  <link href="../../css/syntax.css" rel="stylesheet" type="text/css">
  <link href="../../css/sharebutton.css" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="https://magazine.rubyist.net/articles/0014/0014-CGIProgrammingForRubyBeginners-1.html">
  <link rel="alternate" type="application/rss+xml" title="Rubyist Magazine" href="https://magazine.rubyist.net/feed.xml">
  <link rel="shortcut icon" href="../../images/favicon.ico">
</head>

  <body>
    <div class="container-fluid">
        <div class="row full">
            <div class="col-md-2 hidden-xs sidebar">
                <h4>

</h4>

<h4>バックナンバー</h4>
<ul>
    <li><a href="../../articles/backnumber/backnumber.html">記事単位</a></li>
    <hr>
    
        <li><a href="../../articles/prerubykaigi2020/preRubyKaigi2020-index.html">RubyKaigi Takeout 2020 直前特集号</a></li>
    
        <li><a href="../../articles/0061/0061-index.html">0061号(2020-02)</a></li>
    
        <li><a href="../../articles/0060/0060-index.html">0060号(2019-08)</a></li>
    
        <li><a href="../../articles/prerubykaigi2019/preRubyKaigi2019-index.html">RubyKaigi 2019 直前特集号</a></li>
    
        <li><a href="../../articles/0059/0059-index.html">0059号(2019-01)</a></li>
    
        <li><a href="../../articles/0058/0058-index.html">0058号(2018-08)</a></li>
    
        <li><a href="../../articles/prerubykaigi2018/preRubyKaigi2018-index.html">RubyKaigi 2018 直前特集号</a></li>
    
        <li><a href="../../articles/0057/0057-index.html">0057号(2018-02)</a></li>
    
        <li><a href="../../articles/prerubykaigi2017/preRubyKaigi2017-index.html">RubyKaigi 2017 直前特集号</a></li>
    
        <li><a href="../../articles/0056/0056-index.html">0056号(2017-08)</a></li>
    
        <li><a href="../../articles/0055/0055-index.html">0055号(2017-03)</a></li>
    
        <li><a href="../../articles/0054/0054-index.html">0054号(2016-08)</a></li>
    
        <li><a href="../../articles/pretokyorubykaigi11/preTokyoRubyKaigi11-index.html">東京 Ruby 会議 11 直前特集号</a></li>
    
        <li><a href="../../articles/0053/0053-index.html">0053号(2016-04)</a></li>
    
        <li><a href="../../articles/0052/0052-index.html">0052号(2015-12)</a></li>
    
        <li><a href="../../articles/0051/0051-index.html">0051号(2015-09)</a></li>
    
        <li><a href="../../articles/0050/0050-index.html">0050号(2015-05)</a></li>
    
        <li><a href="../../articles/0049/0049-index.html">0049号(2014-12)</a></li>
    
        <li><a href="../../articles/0048/0048-index.html">0048号(2014-09)</a></li>
    
        <li><a href="../../articles/0047/0047-index.html">0047号(2014-06)</a></li>
    
        <li><a href="../../articles/0046/0046-index.html">0046号(2014-04)</a></li>
    
        <li><a href="../../articles/0045/0045-index.html">0045号(2013-12)</a></li>
    
        <li><a href="../../articles/0044/0044-index.html">0044号(2013-09)</a></li>
    
        <li><a href="../../articles/0043/0043-index.html">0043号(2013-07)</a></li>
    
        <li><a href="../../articles/0042/0042-index.html">0042号(2013-05)</a></li>
    
        <li><a href="../../articles/ruby200specialen/Ruby200SpecialEn-index.html">2.0.0 Special (EN)</a></li>
    
        <li><a href="../../articles/0041/0041-index.html">0041号(2013-02)</a></li>
    
        <li><a href="../../articles/0040/0040-index.html">0040号(2012-11)</a></li>
    
        <li><a href="../../articles/0039/0039-index.html">0039号(2012-09)</a></li>
    
        <li><a href="../../articles/rubykaja/kaja.html">RubyKaja のご紹介</a></li>
    
        <li><a href="../../articles/0038/0038-index.html">0038号(2012-05)</a></li>
    
        <li><a href="../../articles/0037/0037-index.html">0037号(2012-02)</a></li>
    
        <li><a href="../../articles/0036/0036-index.html">0036号(2011-11)</a></li>
    
        <li><a href="../../articles/0035/0035-index.html">0035号(2011-09)</a></li>
    
        <li><a href="../../articles/prerubykaigi2011/preRubyKaigi2011-index.html">RubyKaigi2011直前特集号</a></li>
    
        <li><a href="../../articles/0034/0034-index.html">0034号(2011-06)</a></li>
    
        <li><a href="../../articles/0033/0033-index.html">0033号(2011-04)</a></li>
    
        <li><a href="../../articles/0032/0032-index.html">0032号(2011-01)</a></li>
    
        <li><a href="../../articles/0031/0031-index.html">0031号(2010-10)</a></li>
    
        <li><a href="../../articles/prerubykaigi2010/preRubyKaigi2010-index.html">RubyKaigi2010直前特集号</a></li>
    
        <li><a href="../../articles/0030/0030-index.html">0030号(2010-06)</a></li>
    
        <li><a href="../../articles/0029/0029-index.html">0029号(2010-03)</a></li>
    
        <li><a href="../../articles/0028/0028-index.html">0028号(2009-12)</a></li>
    
        <li><a href="../../articles/0027/0027-index.html">0027号(2009-09)</a></li>
    
        <li><a href="../../articles/0026/0026-index.html">0026号(2009-06)</a></li>
    
        <li><a href="../../articles/0025/0025-index.html">0025号(2009-02)</a></li>
    
        <li><a href="../../articles/0024/0024-index.html">0024号(2008-10)</a></li>
    
        <li><a href="../../articles/0023/0023-index.html">0023号(2008-03)</a></li>
    
        <li><a href="../../articles/0022/0022-index.html">0022号(2007-12)</a></li>
    
        <li><a href="../../articles/0021/0021-index.html">0021号(2007-09)</a></li>
    
        <li><a href="../../articles/0020/0020-index.html">0020号(2007-08)</a></li>
    
        <li><a href="../../articles/0019/0019-index.html">0019号(2007-05)</a></li>
    
        <li><a href="../../articles/0018/0018-index.html">0018号(2007-02)</a></li>
    
        <li><a href="../../articles/0017/0017-index.html">0017号(2006-11)</a></li>
    
        <li><a href="../../articles/0016/0016-index.html">0016号(2006-09)</a></li>
    
        <li><a href="../../articles/0015/0015-index.html">0015号(2006-07)</a></li>
    
        <li><a href="../../articles/rubykaigi2006/RubyKaigi2006-index.html">日本 Ruby カンファレンス 2006 特別号</a></li>
    
        <li><a href="../../articles/0014/0014-index.html">0014号(2006-05)</a></li>
    
        <li><a href="../../articles/0013/0013-index.html">0013号(2006-02)</a></li>
    
        <li><a href="../../articles/0012/0012-index.html">0012号(2005-12)</a></li>
    
        <li><a href="../../articles/0011/0011-index.html">0011号(2005-11)</a></li>
    
        <li><a href="../../articles/0010/0010-index.html">0010号(2005-10)</a></li>
    
        <li><a href="../../articles/0009/0009-index.html">0009号(2005-09)</a></li>
    
        <li><a href="../../articles/0008/0008-index.html">0008号(2005-07)</a></li>
    
        <li><a href="../../articles/0007/0007-index.html">0007号(2005-06)</a></li>
    
        <li><a href="../../articles/0006/0006-index.html">0006号(2005-05)</a></li>
    
        <li><a href="../../articles/0005/0005-index.html">0005号(2005-02)</a></li>
    
        <li><a href="../../articles/0004/0004-index.html">0004号(2004-12)</a></li>
    
        <li><a href="../../articles/0003/0003-index.html">0003号(2004-11)</a></li>
    
        <li><a href="../../articles/0002/0002-index.html">0002号(2004-10)</a></li>
    
        <li><a href="../../articles/0001/0001-index.html">0001号(2004-09)</a></li>
    
</ul>
<p class="rss-subscribe"><a href="/feed.xml">RSS</a></p>

            </div>
            <div class="col-md-10 main">
                <div class="row">
                    <div class="col-md-12">
                        <img src="../../images/rubima_logo_l.png">
                        <h1>Ruby ビギナーのための CGI 入門 【第 3 回】 ページ 1</h1>
                        <div class="social-buttons">
                            <div class='sns'>            
    <ul class="clearfix">
       <li class="twitter"><a href="https://twitter.com/share?text=Ruby ビギナーのための CGI 入門 【第 3 回】 ページ 1&amp;url=https://magazine.rubyist.net/articles/0014/0014-CGIProgrammingForRubyBeginners-1.html" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa fa-twitter"></i></a></li>
       <li class="facebook"><a href="https://www.facebook.com/sharer.php?u=https://magazine.rubyist.net/articles/0014/0014-CGIProgrammingForRubyBeginners-1.html&amp;t=Ruby ビギナーのための CGI 入門 【第 3 回】 ページ 1" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa fa-facebook"></i></a></li>
       <li class="hatebu"><a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=https://magazine.rubyist.net/articles/0014/0014-CGIProgrammingForRubyBeginners-1.html&amp;Ruby ビギナーのための CGI 入門 【第 3 回】 ページ 1" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"><i class="fa">B!</i></a></li>
    </ul>
</div>
                        </div>
                        <div class="post_info">
                            

  <span class="created_on">初稿：2006-05-15</span>



                        </div>
                        
<p><a href="../../articles/0014/0014-CGIProgrammingForRubyBeginners.html">目次ページへ</a>
<a href="../../articles/0014/0014-CGIProgrammingForRubyBeginners-2.html">次ページへ</a></p>

<h2 id="このページの目次">このページの目次</h2>

<ul id="markdown-toc">
  <li><a href="#このページの目次" id="markdown-toc-このページの目次">このページの目次</a></li>
  <li><a href="#はじめに" id="markdown-toc-はじめに">はじめに</a>    <ul>
      <li><a href="#今号の記事について" id="markdown-toc-今号の記事について">今号の記事について</a></li>
      <li><a href="#対象読者" id="markdown-toc-対象読者">対象読者</a></li>
      <li><a href="#準備" id="markdown-toc-準備">準備</a></li>
    </ul>
  </li>
  <li><a href="#エラーについて" id="markdown-toc-エラーについて">エラーについて</a></li>
  <li><a href="#今号の全体の流れ" id="markdown-toc-今号の全体の流れ">今号の全体の流れ</a></li>
  <li><a href="#続々-ruby-に馴れよう" id="markdown-toc-続々-ruby-に馴れよう">続々 Ruby に馴れよう</a>    <ul>
      <li><a href="#前回の復習" id="markdown-toc-前回の復習">前回の復習</a></li>
      <li><a href="#オブジェクトとは何か" id="markdown-toc-オブジェクトとは何か">オブジェクトとは何か</a></li>
      <li><a href="#メソッド" id="markdown-toc-メソッド">メソッド</a>        <ul>
          <li><a href="#パラメーター-引数-について" id="markdown-toc-パラメーター-引数-について">パラメーター (引数) について</a></li>
          <li><a href="#メソッドの実行結果-返り値" id="markdown-toc-メソッドの実行結果-返り値">メソッドの実行結果 (返り値)</a></li>
        </ul>
      </li>
      <li><a href="#連続でメソッドを実行する" id="markdown-toc-連続でメソッドを実行する">連続でメソッドを実行する</a>        <ul>
          <li><a href="#その他のメソッド" id="markdown-toc-その他のメソッド">その他のメソッド</a></li>
        </ul>
      </li>
      <li><a href="#クラス" id="markdown-toc-クラス">クラス</a>        <ul>
          <li><a href="#分類としてのクラス" id="markdown-toc-分類としてのクラス">分類としてのクラス</a></li>
          <li><a href="#機能としてのクラス" id="markdown-toc-機能としてのクラス">機能としてのクラス</a></li>
          <li><a href="#オブジェクトの作り手としてのクラス" id="markdown-toc-オブジェクトの作り手としてのクラス">オブジェクトの作り手としてのクラス</a></li>
        </ul>
      </li>
      <li><a href="#メソッドやクラスの調べ方" id="markdown-toc-メソッドやクラスの調べ方">メソッドやクラスの調べ方</a>        <ul>
          <li><a href="#ブラウザ経由で-ruby-リファレンスマニュアル-を使う" id="markdown-toc-ブラウザ経由で-ruby-リファレンスマニュアル-を使う">ブラウザ経由で Ruby リファレンスマニュアル を使う</a></li>
          <li><a href="#html-help版-ruby-リファレンスマニュアル-を使う" id="markdown-toc-html-help版-ruby-リファレンスマニュアル-を使う">HTML Help版 Ruby リファレンスマニュアル を使う</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="はじめに">はじめに</h2>

<p>筆者は実家への引越しや職場の異動に追われていましたが、
皆さん如何お過ごしでしょうか。
私は最近仕事で疲れた時に
実家の二匹の猫をからかうのを楽しみにしています。</p>

<h3 id="今号の記事について">今号の記事について</h3>

<p><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners.html">前回</a>は
HTML のフォームを使った CGI プログラムを作りました。
その一環として最後には簡易掲示板に挑戦しました。
掲示板としては荒削りでしたが、それなりに動作していましたね。
最終的にはこの簡易掲示板を本格的な掲示板に発展させるのですが、
今号はちょっと違う方向に話を進めていきます。</p>

<p>プログラムを作成する際、プログラムが思ったように動作せず、
エラーが起きることがあります。
CGI プログラムも例外ではありません。
プログラムを完成させるにはエラーを修正しなければならないのですが、
一般に CGI プログラムのエラーを修正するのは難しいとされています。</p>

<p>そこで、今号は少し寄り道をして CGI プログラムを
書く時に目にするエラーや
その対処法について説明しようと思います。</p>

<h3 id="対象読者">対象読者</h3>

<p>この記事は以下のような人を対象としています。</p>

<ul>
  <li><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners.html">12 号</a> までの記事を読んだ人</li>
  <li>HTML を書ける人</li>
  <li>Windows 98/98SE/Me/2000/XP のいずれかを使っている人</li>
</ul>

<p>この連載は前回 (12 号) までの記事を読んでいる人を対象として書かれています。
今号を読む前に前回までの内容を把握しておいて下さい。</p>

<h3 id="準備">準備</h3>

<p>必要なものは下の 2 つです。</p>

<ul>
  <li>サーバー</li>
  <li>Ruby</li>
</ul>

<p>この他に RDE を使います。これらの準備の方法は
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners.html">11 号</a> で述べたので、
詳しくはそちらを参照してください。
また、今号で使うプログラムを zip ファイルにまとめてあります。
前回と同じようにダウンロードして C:\ に展開して下さい。
<a href="../../images/0014-CGIProgrammingForRubyBeginners-1/rubima014-cgi.zip">rubima014-cgi.zip</a></p>

<h2 id="エラーについて">エラーについて</h2>

<p>今号の主題はエラーへの対応方法です。
いきなり対応方法について説明しても良いのですが、
少しエラーについて考えてみましょう。</p>

<p>一口にエラーと言っても色々な種類があります。
まずは大まかにどのようなエラーがあるのかを分類してみましょう。
小さな CGI プログラムを作る時には大まかに分けて
3 つの種類のエラーが生じると筆者は考えています。</p>

<ol>
  <li>Ruby プログラムとしてのエラー</li>
  <li>CGI プログラムとしてのエラー</li>
  <li>プログラムが満たすべき機能を満たしていないことによるエラー</li>
</ol>

<p>1 つ目のエラーは Ruby の約束事に反したことによるエラーです。
こうしたエラーとしては、存在しない変数を使おうとした、
存在しない命令を使おうとした、などの例が挙げられます。
この種のエラーの多くは Ruby が教えてくれるので、
比較的簡単に見つけることが出来ます。</p>

<p>2 つ目のエラーは CGI プログラムの約束事に反した場合です。
<a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-4.html">11 号</a> で
CGI プログラムの最初に Content-Type … を表示させなければならないというルールを紹介しましたね。
あれが CGI の 約束事の 1 つです。
CGI プログラムにはこれ以外にもいくつかの約束事があり、
これを破ると CGI プログラムの結果がブラウザに表示されなかったりして
エラーとなってしまいます。</p>

<p>3 つ目は原因を発見するのが難しいエラーです。
個々の CGI プログラムには作成者が決めた機能があります。
例えば、掲示板なら投稿データの受け付け、保存、表示といった機能があります。
作成者はこうした機能を自分で決めて、
プログラムにその機能を盛り込んでいきます。
しかし、思った通りの機能が実現されていなかったり、
思っているのとは違う動作をすることがあります。
この種のエラーを起こすプログラムが Ruby や CGI の約束事を満たしていると、
原因を見つけることが困難になります。</p>

<p>今号では主に 1 つ目と 2 つ目のエラーについて説明をしていきます。
3 つ目のエラーに対応するにはある程度の経験が必要なので、
今号では最後に少し触れるだけにとどめます。</p>

<h2 id="今号の全体の流れ">今号の全体の流れ</h2>

<p>まずは比較的簡単に見つけることが出来る
Ruby プログラムとしてのエラーから見ていきます。
実際に起きたエラーに対応する場合も、
まず Ruby プログラムとしてのエラーの有無を調べた方が、
原因を突き止めやすいようです。</p>

<p>上で述べたように Ruby プログラムとしてのエラーは
Ruby がその理由を教えてくれます。
しかし、その理由は専門用語で説明されており、
エラーの原因を理解するには、
そうしたプログラムの用語を幾つか知っておく必要があります。
そのため先にエラーメッセージを理解するために必要な用語を紹介していきます。</p>

<p>そういうわけで、今号では下のような順番で説明をしていきます。
まどろっこしいかもしれませんが、頑張ってついてきて下さい。</p>

<ol>
  <li>Ruby のエラーを理解するためのプログラムの用語</li>
  <li>Ruby プログラムとしてのエラー</li>
  <li>CGI プログラムのエラー</li>
</ol>

<h2 id="続々-ruby-に馴れよう">続々 Ruby に馴れよう</h2>

<p>ここからは Ruby でよく使われる
プログラムの用語を紹介していきます。</p>

<p>この連載では今まで難しい用語を使わず説明してきましたが、
Ruby のエラーを理解するためにはこうした用語はどうしても必要になります。
出来るだけ分かりやすく説明するつもりですので、
挫けずに読み進めて下さい。</p>

<p>ここで紹介する用語はエラーの原因を理解するためだけではなく、
Ruby についての色々な文章や書籍を読む時にも役に立ちます。
是非覚えて下さい。</p>

<h3 id="前回の復習">前回の復習</h3>

<p>前回で使った機能をもとに説明をしていきますので、
下に挙げる機能を簡単に復習しておいて下さい。</p>

<ul>
  <li><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-1.html">Array</a></li>
  <li><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-1.html">Hash</a></li>
  <li><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-1.html">環境変数 - ENV</a></li>
  <li><a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-1.html">if 文</a></li>
</ul>

<h3 id="オブジェクトとは何か">オブジェクトとは何か</h3>

<p>最初に紹介する言葉は「オブジェクト」です。
このオブジェクトという言葉は
Ruby 以外のプログラム言語でも使われる言葉なので、
今慣れておくと将来に役立つ場面が多いと思います。</p>

<p>オブジェクトの概念は少々分かりにくいので、
まずは実際の例を見てみましょう。
その後で言葉の説明をします。
では、下にオブジェクトの例を 4 つ示します。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14
"http://www.ruby-lang.org/"
[14,"rubima","cgi"]
{14 =&gt; "rubima", "cgi" =&gt; "Web", "ruby" =&gt; "programming"}</code></pre></figure>

<p>上から順に数値、文字列、Array、Hash です。
いずれもこれまで使ってきたデータばかりですね。
これらは全てオブジェクトです。
つまり、皆さんは知らず知らずのうちにオブジェクトを使っていたわけです。</p>

<p>実は <strong>Ruby で使用されるデータはすべてオブジェクトです</strong>。
ですから、これまで使ってきたデータはすべてオブジェクトということになります。
前回は上の 4 つ以外に CGI データや File データなども使いました。
これらもオブジェクトです。</p>

<p>でも、何故データではなく
わざわざオブジェクトという言葉を使うのでしょうか？
それはオブジェクトにはデータにはない特徴が幾つかあるからです。</p>

<p>筆者が考えるオブジェクトの最も重要な特徴は
<strong>オブジェクトは命令を受け取ってその命令を実行してくれる</strong> という点です。
例えば、前回 Array の中のデータの個数を知るのに 
Array のオブジェクトに length 命令を実行してもらいました。
覚えているでしょうか?</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">puts [11,22,33,44].length</code></pre></figure>

<p>上のプログラムは 4 を表示します。
[11,22,33,44] という Array のオブジェクトが length という命令を
知っていてそれに応えてくれたわけです。
同様に数値、文字列、Hash も命令に応えてくれます。
下にそれぞれの例とその実行結果を 3 つ示します。</p>

<p>数値</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14.next</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">15</code></pre></figure>

<p>整数に next という命令を使うと、元の数に +1 された数を返してくれます。</p>

<p>文字列</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"http://www.ruby-lang.org/".split(".")</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">["http://www", "ruby-lang", "org/"]</code></pre></figure>

<p>Hash</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{14 =&gt; "rubima", "cgi" =&gt; "Web", "ruby" =&gt; "programming"}.length</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">3</code></pre></figure>

<p>このようにオブジェクトには命令に応えてくれるという側面があります。
データという言葉だと加工されるものというイメージが先行して
命令に応えてくれるというイメージが湧きにくいので、
その違いを明確にするためにデータではなくオブジェクトという言葉が使われます。</p>

<p>その他にもデータとオブジェクトには違いがありますが、ここでは触れないでおきます。
細かい違いを出せばきりが無いので、
命令を実行してくれるデータがオブジェクトなんだと割り切っても良いでしょう。</p>

<h3 id="メソッド">メソッド</h3>

<p>今まで見てきたようにオブジェクトは命令に応えてくれます。
この時、オブジェクトに出された命令をメソッドと言います。
例えば、下の 3 つの例ではそれぞれ
next, split, length がメソッドです。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14.next</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"http://www.ruby-lang.org/".split(".")</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{14 =&gt; "rubima", "cgi" =&gt; "Web", "ruby" =&gt; "programming"}.length</code></pre></figure>

<p>前回もオブジェクトに対してメソッド (命令) を使いましたが、
もう一度メソッドの使い方を説明しておきましょう。
一般にあるオブジェクトにメソッドを実行して欲しい場合、下のように書きます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">オブジェクト.メソッド( パラメーター )</code></pre></figure>

<p>“<a href="http://www.ruby-lang.org/">http://www.ruby-lang.org/</a>“.split(“.”) の例であれば、
オブジェクト、メソッド、パラメーターは下のようになります。
ちなみに、パラメーターは日本語で引数 (ひきすう) とも呼ばれます。</p>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>“<a href="http://www.ruby-lang.org/">http://www.ruby-lang.org/</a>”</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>split</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>”.”</td>
    </tr>
  </tbody>
</table>

<p>オブジェクト・メソッド・パラメーターの例を
他にも出してみます。</p>

<p>一つ目は 14.next です。これは下のような要素からなっています。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14.next</code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>14</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>next</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>なし</td>
    </tr>
  </tbody>
</table>

<p>次は Hash です。どのような要素に分かれるでしょうか？</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{14 =&gt; "rubima", "cgi" =&gt; "Web", "ruby" =&gt; "programming"}.length</code></pre></figure>

<p>答えは下記のようになります。</p>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>{14 =&gt; “rubima”, “cgi” =&gt; “Web”, “ruby” =&gt; “programming”}</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>length</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>なし</td>
    </tr>
  </tbody>
</table>

<h4 id="パラメーター-引数-について">パラメーター (引数) について</h4>

<p>パラメーター (引数) でメソッドの挙動を
変更出来るのは前回でも見ましたね。
例えば、次の 2 つのプログラムでは引数が違います。
そのため split の分解の仕方が変わります。</p>

<p>1 つ目の例 では split の引数が「.」です。
split によって「.」で分解されて、文字列が 3 つに分かれます。</p>

<p>プログラム</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"http://www.ruby-lang.org/".split(".")</code></pre></figure>

<p>結果</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"> ["http://www", "ruby-lang", "org/"]</code></pre></figure>

<p>2 つ目の例では「:」で分解し、2 つに分かれます。</p>

<p>プログラム</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"http://www.ruby-lang.org/".split(":")</code></pre></figure>

<p>結果</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"> ["http", "//www.ruby-lang.org/"]</code></pre></figure>

<p>このようにパラメーター (引数) にはメソッドの挙動を
変える効果があります。</p>

<p>パラメーター (引数) は複数になることもあります。
例えば、上の split には 2 つ目の引数を付ける事が出来ます
(今までは 2 つ目の引数を省略して使っていました)。</p>

<p>下のように 2 つ目の引数に 2 という数値を指定すると、
split によって文字列は 2 つに分かれます。
split の 2 つ目の引数には分割される時の最大分割数を指定するわけです。</p>

<p>プログラム</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"http://www.ruby-lang.org/".split(".", 2)</code></pre></figure>

<p>結果</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">["http://www", "ruby-lang.org/"]</code></pre></figure>

<p>パラメーターを複数使う時は下のような形で指定します。
簡単に言えば各引数を「,」でつなぐわけです。
コンマの前後に空白を入れてもかまいません。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">引数その1, 引数その2, 引数その3, ...</code></pre></figure>

<p>Ruby のメソッドの引数は色々と複雑なのですが、
とりあえずはこの程度の理解で良いと思います。</p>

<h4 id="メソッドの実行結果-返り値">メソッドの実行結果 (返り値)</h4>

<p>オブジェクトにメソッドを実行してもらう
(前回までの説明ならデータに命令を実行してもらう) と、
何らかの結果が返ってきます。</p>

<p>例えば、上で使った split なら文字列を分割した結果が
Array のオブジェクトとして返ってきますし、
14.next なら実行した結果として 15 という整数が返ってきます。
このようにメソッドには必ず実行結果があり、
その実行結果を「返り値」と呼びます。</p>

<p>ここで「返り値」という言葉の練習をしてみましょう。
次のプログラムを「返り値」を使って説明してみて下さい。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">a = "hoge".split("o")</code></pre></figure>

<p>これは “hoge” というオブジェクトに split というメソッドを
“o” という引数を付けて実行してもらい、
その返り値が [“h”, “ge”] という Array になり、
その Array に 変数 a の目印が付いた ということになります。
この説明の最後の部分の「変数 a の目印が付いた」は
しばしば__「変数 a に代入された」__と表現されます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">b = [1,2,3,4].length</code></pre></figure>

<p>次は [1,2,3,4] というオブジェクトに length というメソッドを引数無しで
実行してもらい、その返り値は 4 という数値で、
4 が変数 b に代入された です。</p>

<h3 id="連続でメソッドを実行する">連続でメソッドを実行する</h3>

<p>プログラムを書く時、「.」でメソッドをつなげることが出来ます。
例えば、下のように書くことが可能です。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"cgi ruby HTML".split(" ").length</code></pre></figure>

<p>このような書き方をすると、最初のメソッドの返り値に次のメソッドを
連続で実行してもらうことになります。
試しに上のプログラムを順に解釈してみましょう。</p>

<p>まずは</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"cgi ruby HTML".split(" ").length</code></pre></figure>

<p>のうち</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"cgi ruby HTML".split(" ")</code></pre></figure>

<p>の部分が実行されます。その返り値は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">["cgi", "ruby", "HTML"]</code></pre></figure>

<p>です。次に「.length」が実行されます。
これは “cgi ruby HTML”.split(“ “) の返り値に
length のメソッドを実行して下さいという意味になります。
つまり、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"cgi ruby HTML".split(" ").length</code></pre></figure>

<p>は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">["cgi", "ruby", "HTML"].length</code></pre></figure>

<p>と同じになります。
[“cgi”, “ruby”, “HTML”].length の結果は 3 になるので、
“cgi ruby HTML”.split(“ “).length の実行結果も 3 になります。</p>

<p>以上を踏まえると、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"cgi ruby HTML".split(" ").length</code></pre></figure>

<p>は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">arr = "cgi ruby HTML".split(" ")
arr.length</code></pre></figure>

<p>と書くことも出来ます。
馴れないうちは最初の書き方は難しく感じるかもしれませんが、
タイプする量は最初の方が少なくて楽に書けます。</p>

<p>次の例も考えてみましょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">111222333.to_s.split("222")</code></pre></figure>

<p>to_s というのは文字列に変化させるメソッドです。
111222333 という数値に to_s を実行してもらうと “111222333” となります。
それを split で “222” で分解するので、
111222333.to_s.split(“222”) の実行結果は [“111”, “333”] になります。</p>

<p>さらにもう一つ別の例を考えてみましょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{1=&gt;2, 3=&gt;4, 5=&gt;6}.length.next</code></pre></figure>

<p>これは下のように実行されます。</p>

<ol>
  <li>{1=&gt;2, 3=&gt;4, 5=&gt;6}.length が実行される</li>
  <li>返り値は 3 になる</li>
  <li>3.next が実行される</li>
  <li>返り値は 4 になる</li>
</ol>

<p>従って、最終結果は 4 になります。</p>

<p>こうしたメソッドの連結は慣れれば非常に便利です。
皆さんも試してみて下さい。</p>

<h4 id="その他のメソッド">その他のメソッド</h4>

<p>今までは必ず</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">オブジェクト.メソッド(パラメーター)</code></pre></figure>

<p>という形でメソッドを使ってきましたが、
オブジェクトを省略できるメソッドや「.」に続かないメソッドもあります。</p>

<p>例えば、print や puts もメソッドで、オブジェクトを省略して使えます。</p>

<p>つまり、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">オブジェクト.メソッド(パラメーター)</code></pre></figure>

<p>ではなく、</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">メソッド(パラメーター)</code></pre></figure>

<p>という形で使います。
Ruby にはこうしたメソッドが print や puts 以外にも幾つかあります。
print や puts はすでに何回も出てきているので、
実際の使用方法は分かると思います。</p>

<p>また、一見するとメソッドに見えないかもしれませんが、
Array、Hash の [] や数値の足し算の + もメソッドです。
具体例を下に例示します。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">1 + 1</code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>1</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>+</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"aaa" + "bbb"</code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>“aaa”</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>+</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>“bbb”</td>
    </tr>
  </tbody>
</table>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[1,2][0]</code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>オブジェクト</td>
      <td>[1,2]</td>
    </tr>
    <tr>
      <td>メソッド</td>
      <td>[]</td>
    </tr>
    <tr>
      <td>パラメーター</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<p>このように「.」が付いていないから
メソッドではないと言えません。</p>

<h3 id="クラス">クラス</h3>

<p>次にクラスという用語を説明します。
<a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-3.html">前回</a> では CGI クラスを紹介しました。
その時は CGI クラスには CGI プログラムを作るための
便利な機能が集まっていると書きました。
これは間違いではないのですが、実はクラスの説明としては不十分でした。</p>

<p>大雑把に言ってクラスには 3 つの役割があります。
1 つはオブジェクトを分類するための名前としての役割です。
もう 1 つはオブジェクトの持つ機能を決めることです。
そして、最後の役割はオブジェクトを作ることです。</p>

<h4 id="分類としてのクラス">分類としてのクラス</h4>

<p>まずはオブジェクトの分類について説明しましょう。
先ほど Ruby のデータは全てオブジェクトだと述べました。
そのため Ruby プログラムではたくさんのオブジェクトが使われます。
その時、何かを手がかりにオブジェクトを分類しないと、
プログラムを書く皆さんが混乱してしまいます。
その分類に使うのがクラスです。</p>

<p>オブジェクトは必ずある 1 つのクラスに分類されます。
今まで使ってきた、数値、文字列、Array、Hash のオブジェクトが
それぞれ何のクラスに分類されるのか見てみましょう。
どのクラスに分類されるのかを知るには
オブジェクトに class メソッドを実行してもらいます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14.class
"rubima".class
[1,2,3,4,5].class
{1 =&gt; 2, 3 =&gt; 4, 5 =&gt; 6}.class</code></pre></figure>

<p>それぞれの返り値は Fixnum、String、Array、Hash となり、
整数は Fixnum に、文字列は String に、
Array は Array に、Hash は Hash というクラスに分類されている事が分かります。
Array や Hash はクラスの名前でもあるわけです。</p>

<p>クラスは分類なので、値が違っても同じ分類ということがあります。
例えば、1 と 14 が何のクラスなのか見てみましょう。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">1.class
14.class</code></pre></figure>

<p>1 と 14 は違う値ですが、分類としては同じ Fixnum です。
同様に下の 2 つも同じ String というクラスです。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">"abc".class
"rubima".class</code></pre></figure>

<p>このようにクラスにはオブジェクトを分類するという役割があります。
しかし、分類するだけでは実用性に乏しいですね。
そこで、次にオブジェクトの機能を決めるという点から
クラスを見ていきましょう。</p>

<h4 id="機能としてのクラス">機能としてのクラス</h4>

<p>オブジェクトが応えることが出来るメソッドは基本的にクラスによって決まります。
例えば、文字列 (String) と Array ではクラスが違うので、
使えるメソッドが異なります。</p>

<p>実際にどんなメソッドが使えるのか見てみましょう。
下のプログラムは数値、文字列、Array、Hash が実行出来るメソッド名の一覧を表示させます。
ここで使われている methods メソッドは
オブジェクトが応えることが出来るメソッド名の一覧を Array で
返してくれます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">puts 1.methods
puts "".methods
puts [].methods
puts {}.methods</code></pre></figure>

<p>いずれも非常にたくさんのメソッドの名前が表示されます。
4 つのオブジェクトに共通のメソッド名もありますが、
文字列にしかないメソッド名や数値にしかないメソッド名もあります。</p>

<p>次に異なる文字列に methods メソッドを実行してみましょう。
同じメソッド名の一覧が表示されたはずです。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">puts "".methods
puts "rubima".methods</code></pre></figure>

<p>空文字列の “” も “rubima” も同じ String クラスに分類されるので、
実行出来るメソッドは同じわけです。</p>

<p>このようにクラスにはオブジェクトの機能を決める役割があります。
上では 数値、文字列、Array、Hash などを例に取りましたが、
これは CGI クラスでも同じです。
CGI クラスに分類されるオブジェクト (CGI のオブジェクト) には 
CGI クラスに備わっている機能 (メソッドなど) を持つことになります。
CGI クラスには CGI プログラムを作るための機能があるので、
CGI オブジェクトを使うことでフォームの値を取得したりすることが簡単になるわけです。</p>

<h4 id="オブジェクトの作り手としてのクラス">オブジェクトの作り手としてのクラス</h4>

<p>今まで数値、文字列、Array、Hash などの
オブジェクトを使ってきました。
その際、文字列は “” で囲んで作り、
Array は [] で囲んで作りました。</p>

<p>でも、違う方法でもオブジェクトを
作ったことがありましたね。
<a href="../../articles/0012/0012-CGIProgrammingForRubyBeginners-3.html">前回</a> 使った CGI データです。
CGI データを作る時に</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">CGI.new</code></pre></figure>

<p>としたのを覚えていますか？
一般にオブジェクトを作る時は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">クラス.new</code></pre></figure>

<p>もしくは</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">クラス.new(パラメーター)</code></pre></figure>

<p>とします。
同様に文字列、Array、Hash も同じ方法で作ることが出来ます。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">String.new
Array.new
Hash.new</code></pre></figure>

<p>それぞれの結果は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">""
[]
{}</code></pre></figure>

<p>となり、空の文字列、空の Array、空の Hash が作られます。
このことから分かるように普通は</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">クラス.new</code></pre></figure>

<p>もしくは</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">クラス.new(パラメーター)</code></pre></figure>

<p>とすると、
そのクラスのオブジェクトを作ることが出来ます。</p>

<p>クラスはしばしばオブジェクトの工場に例えられます。
オブジェクトがクラスから作られ、
その機能もクラスによって決定されるからです。</p>

<h3 id="メソッドやクラスの調べ方">メソッドやクラスの調べ方</h3>

<p>すでに見たようにメソッドにはたくさんの種類があります。
同様にクラスにもたくさんの種類があります。</p>

<p>これだけたくさんメソッドやクラスがあると、すべて覚えるのは困難です。
実際、筆者もよく使うメソッド・クラス以外はあまり覚えていません。
では、メソッドやクラスの詳細について知りたい場合、
どうしたら良いのでしょうか？</p>

<p>例えば、</p>

<ul>
  <li>メソッドの使い方</li>
  <li>メソッドの引数</li>
  <li>あるクラスのオブジェクトで使えるメソッド</li>
</ul>

<p>などを調べたいことがあるでしょう。
このようなことを調べる方法はいくつかありますが、
ここでは Ruby のリファレンスマニュアルを使う方法を紹介します。
リファレンスマニュアルには Ruby の情報がたくさん集まっています。</p>

<h4 id="ブラウザ経由で-ruby-リファレンスマニュアル-を使う">ブラウザ経由で Ruby リファレンスマニュアル を使う</h4>

<p>下記に Ruby リファレンスマニュアル へのリンクがあります。
ブラウザでリンクをたどって読んでみて下さい。</p>

<p><a href="http://www.ruby-lang.org/ja/man/?cmd=view;name=Ruby%A5%EA%A5%D5%A5%A1%A5%EC%A5%F3%A5%B9%A5%DE%A5%CB%A5%E5%A5%A2%A5%EB">Rubyリファレンスマニュアル </a></p>

<p>例えば、文字列 (String) を調べたいなら、
トップページの一番右上にある検索に String と入れて
全文検索のボタンを押してみましょう。
String に関係したページが一覧で出てくるので、
そこから String クラスの情報を調べることが出来ます。</p>

<h4 id="html-help版-ruby-リファレンスマニュアル-を使う">HTML Help版 Ruby リファレンスマニュアル を使う</h4>

<p>また、Windows に限って言えば、Ruby リファレンスマニュアルの Windows HTML Help を使うことが可能です。
これは <a href="../../articles/0011/0011-CGIProgrammingForRubyBeginners-2.html">11号</a>
でも簡単に紹介しました。</p>

<p>必要なファイルは <a href="http://elbereth-hp.hp.infoseek.co.jp/ruby.html">http://elbereth-hp.hp.infoseek.co.jp/ruby.html</a> にあります。
ここから ruby-refm-rdp-1.9.0-ja-htmlhelp.zip をダウンロード出来ます。
この zip ファイルを解凍すると、
下図のように rubymanjp.chm というファイルがあります。
<img src="../../images/0014-CGIProgrammingForRubyBeginners-1/html_help_folder.jpg" alt="html_help_folder.jpg" /></p>

<p>これをダブルクリックして実行すると、
Ruby リファレンスマニュアルのウィンドウが表示されます。
<img src="../../images/0014-CGIProgrammingForRubyBeginners-1/html_help_window.jpg" alt="html_help_window.jpg" /></p>

<p>使い方はブラウザで使う場合とほとんど同じです。
幾つかのリンクがありますので、
読みたい項目をクリックするとそのページを読むことが出来ます。</p>

<p>検索方法はブラウザと違うので、注意してください。
検索するにはヘルプのウィンドウの左側にある検索のタブに検索語句を入力して
「検索開始」のボタンを押します。
検索が終了すると、検索語句に一致するページがいくつかリストアップされるので、
そこから該当しそうなページを選択します。</p>

<p><a href="../../articles/0014/0014-CGIProgrammingForRubyBeginners.html">目次ページへ</a>
<a href="../../articles/0014/0014-CGIProgrammingForRubyBeginners-2.html">次ページへ</a></p>


                    </div>
                </div>
            </div>
        </div>
    </div>
  </body>
</html>
